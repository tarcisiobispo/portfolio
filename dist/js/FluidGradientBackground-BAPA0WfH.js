import{r as e,R as t,j as n}from"./chunk-DCDZ4v8T.js";import"./chunk-BM1tBEXS.js";const i=[{id:"perfil",className:"section-profile",threshold:.3},{id:"projetos",className:"section-projects",threshold:.3},{id:"backlog",className:"section-backlog",threshold:.3},{id:"contato",className:"section-contact",threshold:.3}],r=new Map,o=()=>{const[t,n]=e.useState("section-profile"),o=e.useRef([]),c=e.useRef(null),a=e.useRef(window.scrollY),l=e.useRef(!1),d=e.useRef(0);e.useLayoutEffect((()=>{const e=e=>{if(r.has(e))return r.get(e)||null;const t=document.getElementById(e);return r.set(e,t),t};o.current=i.map((t=>({...t,element:e(t.id),top:0,height:0})));const t=()=>{"requestIdleCallback"in window?window.requestIdleCallback(u,{timeout:500}):u()};let n;t();const s=()=>{n&&clearTimeout(n),n=setTimeout((()=>{t(),r.clear()}),150)};return window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s),n&&clearTimeout(n),c.current&&cancelAnimationFrame(c.current)}}),[]);const u=e.useCallback((()=>{"undefined"!=typeof window&&o.current.length&&(c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame((()=>{const e=document.createElement("div");e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e);const t=window.scrollY,n=window.innerHeight,i=[];let s=!1;o.current.forEach((e=>{const o=r.get(e.id)||document.getElementById(e.id);if(!o)return void i.push(e);r.has(e.id)||r.set(e.id,o);const c=o.getBoundingClientRect(),a=c.top+t,l=c.height,d=c.top<=.8*n&&c.bottom>=.2*n;Math.abs((e.top||0)-a)>5||Math.abs((e.height||0)-l)>5||e.element!==o?(s=!0,i.push({...e,element:o,top:a,height:l,isInView:d})):i.push(e)})),s&&(o.current=i),document.body.removeChild(e)})))}),[]),m=e.useCallback((()=>{var e;if("undefined"==typeof window)return"section-profile";const n=Date.now();if(n-d.current<300)return t;const r=window.scrollY,s=window.innerHeight;if(Math.abs(r-a.current)<.1*s)return t;if(a.current=r,r<.2*s)return"section-profile";if("IntersectionObserver"in window){const t=window.innerHeight/2,r=document.elementFromPoint(window.innerWidth/2,t);if(r){const t=r.closest("[data-section]");if(null==(e=null==t?void 0:t.dataset)?void 0:e.section){const e=t.dataset.section,r=i.find((t=>t.id===e));if(r)return d.current=n,r.className}}}let c=t,l=1/0;for(const t of o.current){if(!t.element)continue;const e=(t.top||0)+(t.height||0)/2,n=r+s/2,i=Math.abs(e-n);i<l&&(l=i,c=t.className)}return c!==t&&(d.current=n),c}),[t]),f=e.useCallback((()=>{if(!l.current){l.current=!0;const e=requestAnimationFrame((()=>{const e=m();e!==t&&requestAnimationFrame((()=>{n(e),document.body.getBoundingClientRect()})),l.current=!1}));c.current=e}}),[t,m]),h=e.useCallback((e=>{const t=document.querySelector(".fluid-gradient-container");if(!t)return;c.current&&cancelAnimationFrame(c.current);const n=requestAnimationFrame((()=>{const n=t.classList,r=i.find((e=>n.contains(e.className)));if((null==r?void 0:r.className)===e)return;const o=document.createElement("div");o.style.position="fixed",o.style.visibility="hidden",document.body.appendChild(o),i.forEach((e=>{n.contains(e.className)&&n.remove(e.className)})),e&&n.add(e),document.body.removeChild(o)}));c.current=n}),[]);e.useEffect((()=>{let e=null;if("IntersectionObserver"in window){let t=null;e=new IntersectionObserver((e=>{let r=0,o=null;if(e.forEach((e=>{const t=e.target.dataset.section;if(t&&e.isIntersecting){const n=e.intersectionRatio;n>r&&(r=n,o=t)}})),o&&o!==t){t=o;const e=i.find((e=>e.id===o));if(e){const t=requestAnimationFrame((()=>{n(e.className)}));return()=>cancelAnimationFrame(t)}}}),{root:null,rootMargin:"0px",threshold:[.1,.3,.5,.7,.9]}),i.forEach((t=>{const n=document.getElementById(t.id);n&&(n.setAttribute("data-section",t.id),null==e||e.observe(n))}))}const t=((e,t)=>{let n=null;return(...i)=>{n&&clearTimeout(n),n=setTimeout((()=>e(...i)),t)}})(f,100),r={passive:!0,capture:!0},o=e?()=>{}:t;window.addEventListener("scroll",o,r);const s=setTimeout((()=>{if("requestIdleCallback"in window){const e=window.requestIdleCallback((()=>{const e=m();n(e)}),{timeout:500});return()=>window.cancelIdleCallback(e)}{const e=m();n(e)}}),50);return()=>{clearTimeout(s),null==e||e.disconnect(),window.removeEventListener("scroll",o,r),c.current&&cancelAnimationFrame(c.current)}}),[f,m]),e.useEffect((()=>{h(t)}),[t,h]);const p=e.useCallback((e=>{const t=i.find((t=>t.id===e));t&&(n(t.className),requestAnimationFrame((()=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})))}),[]),w=e.useCallback((()=>{const e=i.find((e=>e.className===t));return{id:(null==e?void 0:e.id)||"perfil",className:t,displayName:s((null==e?void 0:e.id)||"perfil")}}),[t]);return e.useMemo((()=>({currentSection:t,setSection:p,getCurrentSectionInfo:w,isScrolling:!1})),[t,w])},s=e=>({perfil:"Perfil",projetos:"Projetos",backlog:"Backlog Estratégico",contato:"Contato"}[e]||e),c=()=>{e.useEffect((()=>{if(document.querySelector(".fluid-gradient-container"))return;const e=document.createElement("div");return e.className="fluid-gradient-container section-profile",document.body.insertBefore(e,document.body.firstChild),()=>{const e=document.querySelector(".fluid-gradient-container");e&&e.remove()}}),[]);return o()},a={transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",perspective:"1000px",willChange:"transform, opacity",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,pointerEvents:"none",WebkitBackfaceVisibility:"hidden",WebkitPerspective:"1000px",WebkitTransform:"translate3d(0, 0, 0)"},l=t.memo((({children:t,className:i=""})=>{e.useRef("");const r=e.useRef(null),{currentSection:o,getCurrentSectionInfo:s}=c(),l=e.useMemo((()=>s()),[s]);e.useEffect((()=>{}),[o,l]);const d=e.useMemo((()=>t?n.jsx("div",{className:`relative z-10 ${i}`,role:"main","aria-live":"polite","aria-atomic":"true",children:t}):null),[t,i]);return e.useEffect((()=>{const e=r.current;if(!e)return;e.className=`fluid-gradient-container ${o}`;const t=setTimeout((()=>{e.classList.add("gradient-transition")}),50);return()=>{clearTimeout(t),e.classList.remove("gradient-transition")}}),[o]),n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:r,className:`fluid-gradient-container ${o}`,style:a,"aria-hidden":"true",role:"presentation","aria-label":`Fundo gradiente da seção ${l.displayName}`}),d]})}));l.displayName="FluidGradientBackground";const d=t.memo((()=>{const{getCurrentSectionInfo:t}=c();return e.useMemo((()=>t()),[t]),null}));d.displayName="GradientSectionIndicator";const u=()=>{const{getCurrentSectionInfo:t}=c();return e.useMemo((()=>t()),[t])},m=t.memo((({sectionId:e,children:t,className:i=""})=>n.jsx("section",{id:e,className:`relative ${i}`,"data-gradient-section":e,children:t}))),f=t.memo((({targetSection:t,children:i,className:r="",onClick:o})=>{const{setSection:s}=c(),a=e.useCallback((e=>{e.preventDefault(),s(t),o&&o()}),[s,t,o]),l=e.useCallback((e=>{"Enter"!==e.key&&" "!==e.key||a(e)}),[a]);return n.jsx("div",{className:`cursor-pointer ${r}`,onClick:a,role:"button",tabIndex:0,onKeyDown:l,"aria-label":`Ir para a seção ${t}`,children:i})}));export{m as GradientSection,d as GradientSectionIndicator,f as GradientTrigger,l as default,u as useCurrentSection};
//# sourceMappingURL=FluidGradientBackground-BAPA0WfH.js.map
