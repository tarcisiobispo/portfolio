import{r as e,ak as t,j as n}from"./vendor.CgGJHizL.js";const o=[{id:"perfil",className:"section-profile",threshold:.3},{id:"projetos",className:"section-projects",threshold:.3},{id:"backlog",className:"section-backlog",threshold:.3},{id:"contato",className:"section-contact",threshold:.3}],i=new Map,r=()=>{const[t,n]=e.useState("section-profile"),r=e.useRef([]),c=e.useRef(null),a=e.useRef(window.scrollY),l=e.useRef(!1),d=e.useRef(0);e.useLayoutEffect(()=>{const e=e=>{if(i.has(e))return i.get(e)||null;const t=document.getElementById(e);return i.set(e,t),t};r.current=o.map(t=>({...t,element:e(t.id),top:0,height:0}));const t=()=>{"requestIdleCallback"in window?window.requestIdleCallback(u,{timeout:500}):u()};let n;t();const s=()=>{n&&clearTimeout(n),n=setTimeout(()=>{t(),i.clear()},150)};return window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s),n&&clearTimeout(n),c.current&&cancelAnimationFrame(c.current)}},[]);const u=e.useCallback(()=>{"undefined"!=typeof window&&r.current.length&&(c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{const e=document.createElement("div");e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e);const t=window.scrollY,n=window.innerHeight,o=[];let s=!1;r.current.forEach(e=>{const r=i.get(e.id)||document.getElementById(e.id);if(!r)return void o.push(e);i.has(e.id)||i.set(e.id,r);const c=r.getBoundingClientRect(),a=c.top+t,l=c.height,d=c.top<=.8*n&&c.bottom>=.2*n;Math.abs((e.top||0)-a)>5||Math.abs((e.height||0)-l)>5||e.element!==r?(s=!0,o.push({...e,element:r,top:a,height:l,isInView:d})):o.push(e)}),s&&(r.current=o),document.body.removeChild(e)}))},[]),m=e.useCallback(()=>{if("undefined"==typeof window)return"section-profile";const e=Date.now();if(e-d.current<300)return t;const n=window.scrollY,i=window.innerHeight;if(Math.abs(n-a.current)<.1*i)return t;if(a.current=n,n<.2*i)return"section-profile";if("IntersectionObserver"in window){const t=window.innerHeight/2,n=document.elementFromPoint(window.innerWidth/2,t);if(n){const t=n.closest("[data-section]");if(t?.dataset?.section){const n=t.dataset.section,i=o.find(e=>e.id===n);if(i)return d.current=e,i.className}}}let s=t,c=1/0;for(const t of r.current){if(!t.element)continue;const e=(t.top||0)+(t.height||0)/2,o=n+i/2,r=Math.abs(e-o);r<c&&(c=r,s=t.className)}return s!==t&&(d.current=e),s},[t]),f=e.useCallback(()=>{if(!l.current){l.current=!0;const e=requestAnimationFrame(()=>{const e=m();e!==t&&requestAnimationFrame(()=>{n(e),document.body.getBoundingClientRect()}),l.current=!1});c.current=e}},[t,m]),g=e.useCallback(e=>{const t=document.querySelector(".fluid-gradient-container");if(!t)return;c.current&&cancelAnimationFrame(c.current);const n=requestAnimationFrame(()=>{const n=t.classList,i=o.find(e=>n.contains(e.className));if(i?.className===e)return;const r=document.createElement("div");r.style.position="fixed",r.style.visibility="hidden",document.body.appendChild(r),o.forEach(e=>{n.contains(e.className)&&n.remove(e.className)}),e&&n.add(e),document.body.removeChild(r)});c.current=n},[]);e.useEffect(()=>{let e=null;if("IntersectionObserver"in window){let t=null;e=new IntersectionObserver(e=>{let i=0,r=null;if(e.forEach(e=>{const t=e.target.dataset.section;if(t&&e.isIntersecting){const n=e.intersectionRatio;n>i&&(i=n,r=t)}}),r&&r!==t){t=r;const e=o.find(e=>e.id===r);if(e){const t=requestAnimationFrame(()=>{n(e.className)});return()=>cancelAnimationFrame(t)}}},{root:null,rootMargin:"0px",threshold:[.1,.3,.5,.7,.9]}),o.forEach(t=>{const n=document.getElementById(t.id);console.log(`üé® FluidGradient: Looking for section ${t.id}, found:`,!!n),n&&(n.setAttribute("data-section",t.id),e?.observe(n),console.log(`üé® FluidGradient: Observing section ${t.id}`))})}const t=((e,t)=>{let n=null;return(...o)=>{n&&clearTimeout(n),n=setTimeout(()=>e(...o),t)}})(f,100),i={passive:!0,capture:!0},r=e?()=>{}:t;window.addEventListener("scroll",r,i);const s=setTimeout(()=>{console.log("üé® FluidGradient: Starting initialization...");const e=o.filter(e=>{const t=document.getElementById(e.id);return console.log(`üé® FluidGradient: Section ${e.id} element:`,!!t),!!t});if(console.log(`üé® FluidGradient: Found ${e.length}/${o.length} sections`),0===e.length)return console.log("üé® FluidGradient: No sections found, trying again..."),void setTimeout(()=>{const e=m();n(e),console.log("üé® FluidGradient: Second attempt, section:",e)},500);if("requestIdleCallback"in window){const e=window.requestIdleCallback(()=>{const e=m();n(e),console.log("üé® FluidGradient: Initial section detected:",e)},{timeout:1e3});return()=>window.cancelIdleCallback(e)}{const e=m();n(e),console.log("üé® FluidGradient: Initial section (no idle callback):",e)}},100);return console.log("üé® FluidGradient: Initialization timeout set"),()=>{clearTimeout(s),e?.disconnect(),window.removeEventListener("scroll",r,i),c.current&&cancelAnimationFrame(c.current)}},[f,m]),e.useEffect(()=>{g(t)},[t,g]);const h=e.useCallback(e=>{const t=o.find(t=>t.id===e);t&&(n(t.className),requestAnimationFrame(()=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}))},[]),p=e.useCallback(()=>{const e=o.find(e=>e.className===t);return{id:e?.id||"perfil",className:t,displayName:s(e?.id||"perfil")}},[t]);return e.useMemo(()=>({currentSection:t,setSection:h,getCurrentSectionInfo:p,isScrolling:!1}),[t,p])},s=e=>({perfil:"Perfil",projetos:"Projetos",backlog:"Backlog Estrat√©gico",contato:"Contato"}[e]||e),c=()=>{e.useEffect(()=>{if(console.log("üé® useGradientContainer: Hook executed"),document.querySelector(".fluid-gradient-container"))return void console.log("üé® useGradientContainer: Container already exists, skipping creation");console.log("üé® useGradientContainer: Creating new container...");const e=document.createElement("div");return e.className="fluid-gradient-container section-profile",e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: -1;\n      pointer-events: none;\n      transform: translate3d(0, 0, 0);\n      backface-visibility: hidden;\n      perspective: 1000px;\n      will-change: transform, opacity;\n    ",document.body.insertBefore(e,document.body.firstChild),console.log("üé® useGradientContainer: Container created and inserted"),()=>{const e=document.querySelector(".fluid-gradient-container");e&&(console.log("üé® useGradientContainer: Cleaning up container"),e.remove())}},[]);return r()},a=t.memo(({children:t,className:o=""})=>{e.useRef("");const{currentSection:i,getCurrentSectionInfo:r}=c();console.log("üé® FluidGradientBackground: Hook initialized, currentSection:",i);const s=e.useMemo(()=>r(),[r]);e.useEffect(()=>{},[i,s]);const a=e.useMemo(()=>t?n.jsx("div",{className:`relative z-10 ${o}`,role:"main","aria-live":"polite","aria-atomic":"true",children:t}):null,[t,o]);return n.jsx(n.Fragment,{children:a})});a.displayName="FluidGradientBackground";const l=t.memo(()=>{const{getCurrentSectionInfo:t}=c();return e.useMemo(()=>t(),[t]),null});l.displayName="GradientSectionIndicator";const d=()=>{const{getCurrentSectionInfo:t}=c();return e.useMemo(()=>t(),[t])},u=t.memo(({sectionId:e,children:t,className:o=""})=>n.jsx("section",{id:e,className:`relative ${o}`,"data-gradient-section":e,children:t})),m=t.memo(({targetSection:t,children:o,className:i="",onClick:r})=>{const{setSection:s}=c(),a=e.useCallback(e=>{e.preventDefault(),s(t),r&&r()},[s,t,r]),l=e.useCallback(e=>{"Enter"!==e.key&&" "!==e.key||a(e)},[a]);return n.jsx("div",{className:`cursor-pointer ${i}`,onClick:a,role:"button",tabIndex:0,onKeyDown:l,"aria-label":`Ir para a se√ß√£o ${t}`,children:o})});export{u as GradientSection,l as GradientSectionIndicator,m as GradientTrigger,a as default,d as useCurrentSection};
