import{r as e,j as a}from"./chunk-DCDZ4v8T.js";import{C as t}from"./chunk-CIm_iNTl.js";import{e as r}from"./chunk-D2pbNng8.js";import{b as s,a as i}from"./chunk-C6d66Cyg.js";import{u as l}from"./chunk-7jliI9d_.js";import{L as n}from"./chunk-BINE45Es.js";import{X as c,s as d,e as o,L as m,r as x,o as u,q as b,t as h}from"./chunk-CmrceVMR.js";import{m as g}from"./chunk-DotIZ1Qp.js";import"./chunk-BM1tBEXS.js";import"./chunk-DMDKzaMJ.js";import"./chunk-OBXXhUzm.js";/* empty css              */const f=[{type:"problem",icon:o},{type:"idea",icon:m},{type:"praise",icon:d}];function p({open:o,onClose:m,section:p="default"}){const[k,y]=e.useState(1),[j,v]=e.useState(null),[N,w]=e.useState(""),[S,C]=e.useState(""),[$,z]=e.useState(!1),[F,E]=e.useState(!1),[P,T]=e.useState(!1),[_,q]=e.useState("idle"),[I,L]=e.useState(!1),R=e.useRef(null),{t:B,i18n:D}=l(),{playSubmitSuccess:Y,playSubmitError:Z,playFieldFocus:G}=s(),{playButtonClick:K}=i();e.useEffect((()=>{if("success"===_){const e=setTimeout((()=>{q("idle")}),4e3);return()=>clearTimeout(e)}}),[_]);const M=N.trim().length>=5,Q=!S||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S),U=M&&!F,X=async e=>{e.preventDefault(),E(!0),q("idle");try{await r.send("service_4z3a60b","template_nc73bg4",{from_name:`Feedback Portfolio - ${j}`,from_email:S||"tbisp0@hotmail.com",message:`Type: ${j}\nSection: ${p}\n\nMessage:\n${N}`,to_email:"tbisp0@hotmail.com",subject:`Portfolio Feedback - ${j} (${p})`,reply_to:S||"tbisp0@hotmail.com"},"eRzZy4gTZ2NXGjFKz"),q("success"),T(!0),Y()}catch(a){console.error("Error sending feedback:",a),q("error"),Z()}finally{E(!1)}},A=()=>{y(1),v(null),w(""),C(""),z(!1),T(!1),q("idle"),L(!1),m()};return a.jsx(n,{open:o,onClose:()=>{1===k||""===N.trim()&&""===S.trim()?A():m()},initialFocus:R,className:"fixed z-50 inset-0 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-2",children:[a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm dark:bg-black/50","aria-hidden":"true"}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-sm w-full mx-auto p-0 z-10 border border-slate-100 dark:border-gray-700",children:[a.jsx("button",{onClick:A,className:"absolute top-3 right-3 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-blue-700 text-gray-700 dark:text-gray-300","aria-label":B("feedback.close"),children:a.jsx(c,{className:"w-5 h-5"})}),a.jsx("div",{className:"p-6 sm:p-8 flex flex-col gap-4",children:P?a.jsxs("div",{className:"flex flex-col items-center py-8",children:[a.jsx(d,{className:"w-12 h-12 text-green-600 dark:text-green-400 mb-4"}),a.jsx("div",{className:"text-center max-w-xs",children:a.jsx("p",{className:"text-lg font-semibold text-green-700 dark:text-green-300 mb-2",children:B("feedback.thankYou")})}),a.jsx(t,{onClick:A,variant:"primary",size:"md",className:"mt-6",children:B("feedback.close")})]}):1===k?a.jsxs(a.Fragment,{children:[a.jsx(n.Title,{className:"text-lg sm:text-xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:B("feedback.typeQuestion")}),a.jsx("div",{className:"flex flex-col gap-3",children:f.map((e=>a.jsx(t,{variant:j===e.type?"primary":"ghost",size:"md",icon:e.icon,iconPosition:"left",onClick:()=>{v(e.type),y(2),K()},className:"justify-center py-3",children:B(`feedback.${e.type}`)},e.type)))})]}):a.jsxs("form",{onSubmit:X,className:"flex flex-col gap-4 mt-2",children:[a.jsx(n.Title,{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:B(`feedback.${j}Title`)||B("feedback.defaultTitle")}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 text-center mb-1",children:B(`feedback.${j}Instruction`)||B("feedback.defaultInstruction")}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{className:"w-full rounded-lg border-2 p-3 min-h-[90px] text-base transition-all focus-visible:ring-2 focus-visible:ring-blue-700 outline-none resize-none bg-slate-50 dark:bg-gray-700 dark:text-white pr-10 "+(I&&!M?"border-red-500 focus:ring-red-500":I&&M?"border-green-500 focus:ring-green-500":"border-slate-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"),placeholder:B(`feedback.${j}Placeholder`)||B("feedback.defaultPlaceholder"),value:N,onChange:e=>w(e.target.value),onBlur:()=>L(!0),onFocus:()=>G(),required:!0,autoFocus:!0,maxLength:1e3,"aria-invalid":I&&!M,"aria-describedby":"feedback-message-help"}),I&&!M&&a.jsx(c,{className:"absolute right-3 top-3 w-5 h-5 text-red-500 dark:text-red-400","aria-hidden":"true"}),I&&M&&a.jsx(x,{className:"absolute right-3 top-3 w-5 h-5 text-green-500 dark:text-green-400","aria-hidden":"true"})]}),I&&!M?a.jsxs("div",{id:"feedback-message-help",className:"text-xs text-red-500 dark:text-red-400 flex items-center gap-1 mb-1",role:"alert",children:[a.jsx(u,{className:"w-3 h-3","aria-hidden":"true"}),B("contact.errors.messageRequired")]}):a.jsx("div",{id:"feedback-message-help",className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:B("feedback.minimumCharacters")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"show-email",type:"checkbox",checked:$,onChange:e=>z(e.target.checked),className:"accent-blue-700"}),a.jsx("label",{htmlFor:"show-email",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer select-none",children:B("feedback.includeEmail")})]}),$&&a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:`rounded-lg border-2 p-2 text-base transition-all focus-visible:ring-2 focus-visible:ring-blue-700 outline-none bg-slate-50 dark:bg-gray-700 dark:text-white w-full pr-10\n                        ${S.length>0?Q?"border-green-500":"border-red-500":"border-slate-300 dark:border-gray-600"}\n                      `,type:"email",placeholder:"E-mail",value:S,onChange:e=>C(e.target.value),"aria-invalid":S.length>0&&!Q,"aria-describedby":"feedback-email-help"}),S.length>0&&!Q&&a.jsx(c,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-red-500 dark:text-red-400","aria-hidden":"true"}),S.length>0&&Q&&a.jsx(x,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-500 dark:text-green-400","aria-hidden":"true"})]}),a.jsx("a",{href:"/portfolio/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-700 dark:text-blue-400 underline mb-2",children:B("feedback.privacyPolicy")}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(t,{onClick:()=>{X({preventDefault:()=>{}})},variant:"primary",size:"md",icon:b,iconPosition:"left",disabled:!U,loading:F,className:"flex-1",children:B(F?"feedback.sending":"feedback.send")}),a.jsx(t,{onClick:()=>{y(1),K()},variant:"ghost",size:"md",icon:h,iconPosition:"left",className:"flex-1",children:B("feedback.back")})]}),"success"===_&&a.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-300",role:"status","aria-live":"polite",children:[a.jsx(x,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),a.jsx("span",{className:"text-sm font-medium text-left",children:B("feedback.thankYou")})]}),"error"===_&&a.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",role:"alert","aria-live":"assertive",children:[a.jsx(u,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),a.jsx("span",{className:"text-sm font-medium text-left",children:"en-US"===D.language?"Error sending feedback. Please try again.":"es-ES"===D.language?"Error al enviar feedback. Int√©ntalo de nuevo.":"Erro ao enviar feedback. Tente novamente."})]})]})})]})]})})}export{p as default};
//# sourceMappingURL=FeedbackModal-CUOE5YnO.js.map
